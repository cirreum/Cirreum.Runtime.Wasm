@page "/view-models"
@inherits PageBase
@inject UserSessionViewModel sessionViewModel

<AppPageTitle>View Models</AppPageTitle>

<h1>View Models</h1>

<Tabs>
	<Tab Name="POCO ViewModel">
		<EditForm EditContext="@viewModel.EditContext"
				  FormName="UserProfile"
				  OnValidSubmit="OnValidSubmit"
				  OnInvalidSubmit="OnInvalidSubmit"
				  class="row g-3 mx-1 mb-1">
			<FluentValidationValidator />
			<div class="col-md-4">
				<label for="firstName" class="form-label">First Name:</label>
				<input class="form-control" @bind="@viewModel.FirstName" id="firstName" />
				<InvalidMessage For="() => viewModel.FirstName" />
			</div>
			<div class="col-md-4">
				<label for="lastName" class="form-label">Last Name:</label>
				<input class="form-control" @bind="@viewModel.LastName" id="lastName" />
				<InvalidMessage For="() => viewModel.LastName" />
			</div>
			<div class="col-md-4">
				<label for="email" class="form-label">Email:</label>
				<input class="form-control" @bind="@viewModel.Email" id="email" />
				<InvalidMessage For="() => viewModel.Email" />
			</div>
			<div class="col-md-4">
				<label for="birthday" class="form-label">Birthday:</label>
				<input class="form-control" type="date" aria-describedby="birthdayAgeMinor" @bind="@viewModel.Birthday" id="birthday" />
				<InvalidMessage For="() => viewModel.Birthday" />
				<span id="birthdayAgeMinor" class="form-text">
					Age:<span>&nbsp;@viewModel.Birthday.GetAge()</span>
					@if (viewModel.Birthday.IsMinorAge()) {
						<span>&nbsp;( and is a minor )</span>
					}
				</span>
			</div>
			<div class="col-md-4">
				<label for="counter" class="form-label">Counter:</label>
				<input id="counter" class="form-control" type="number" min="0" @bind="viewModel.Counter" />
				<InvalidMessage For="() => viewModel.Counter" />
			</div>
			<div class="col-md-4">
				<label for="settings" class="form-label">Settings:</label>
				<textarea id="settings" class="form-control" @bind="viewModel.Settings" />
				<InvalidMessage For="() => viewModel.Settings" />
			</div>
			<!-- Address Fields -->
			<div class="col-12">
				<h4 class="mb-3">Home Address</h4>
			</div>

			<div class="col-12">
				<label for="street" class="form-label">Street:</label>
				<input id="street" class="form-control" @bind="viewModel.HomeAddress.Street" />
				<InvalidMessage For="() => viewModel.HomeAddress.Street" />
			</div>

			<div class="col-md-6">
				<label for="city" class="form-label">City:</label>
				<input id="city" class="form-control" @bind="viewModel.HomeAddress.City" />
				<InvalidMessage For="() => viewModel.HomeAddress.City" />
			</div>

			<div class="col-md-3">
				<label for="state" class="form-label">State:</label>
				<input id="state" class="form-control" @bind="viewModel.HomeAddress.State" />
				<InvalidMessage For="() => viewModel.HomeAddress.State" />
			</div>

			<div class="col-md-3">
				<label for="postalCode" class="form-label">Postal Code:</label>
				<input id="postalCode" class="form-control" @bind="viewModel.HomeAddress.PostalCode" />
				<InvalidMessage For="() => viewModel.HomeAddress.PostalCode" />
			</div>

			<div class="col-md-6">
				<label for="country" class="form-label">Country:</label>
				<input id="country" class="form-control" @bind="viewModel.HomeAddress.Country" />
				<InvalidMessage For="() => viewModel.HomeAddress.Country" />
			</div>
			<div class="col-12">
				<div class="hstack gap-2">
					<button type="submit" class="btn btn-primary btn-sm">Submit</button>
					<button type="button" class="btn btn-secondary btn-sm" @onclick="viewModel.Reset">Reset</button>
				</div>
			</div>
		</EditForm>
	</Tab>
	<Tab Name="SessionState ViewModel">
		<EditForm EditContext="@sessionViewModel.EditContext"
				  FormName="UserProfile"
				  OnValidSubmit="OnValidSubmit"
				  OnInvalidSubmit="OnInvalidSubmit"
				  class="row g-3 mx-1 mb-1">
			<FluentValidationValidator />
			<div class="col-md-4">
				<label for="firstName" class="form-label">First Name:</label>
				<input id="firstName"
					   class="form-control"
					   @bind:get="sessionViewModel.FirstName"
					   @bind:set="sessionViewModel.SetFirstName" />
				<InvalidMessage For="() => sessionViewModel.FirstName" />
			</div>
			<div class="col-md-4">
				<label for="lastName" class="form-label">Last Name:</label>
				<input id="lastName"
					   class="form-control"
					   @bind:get="sessionViewModel.LastName"
					   @bind:set="sessionViewModel.SetLastName" />
				<InvalidMessage For="() => sessionViewModel.LastName" />
			</div>
			<div class="col-md-4">
				<label for="email" class="form-label">Email:</label>
				<input id="email"
					   class="form-control"
					   @bind:get="sessionViewModel.Email"
					   @bind:set="sessionViewModel.SetEmail" />
				<InvalidMessage For="() => sessionViewModel.Email" />
			</div>
			<div class="col-md-4">
				<label for="birthday" class="form-label">Birthday:</label>
				<input id="birthday"
					   class="form-control"
					   type="date"
					   aria-describedby="birthdayAgeMinor"
					   @bind:get="sessionViewModel.Birthday"
					   @bind:set="sessionViewModel.SetBirthday" />
				<InvalidMessage For="() => sessionViewModel.Birthday" />
				<span id="birthdayAgeMinor" class="form-text">
					Age:<span>&nbsp;@sessionViewModel.Birthday.GetAge()</span>
					@if (sessionViewModel.Birthday.IsMinorAge()) {
						<span>&nbsp;( and is a minor )</span>
					}
				</span>
			</div>
			<div class="col-md-4">
				<label for="counter" class="form-label">Counter:</label>
				<input id="counter"
					   class="form-control"
					   type="number"
					   min="0"
					   @bind:get="sessionViewModel.Counter"
					   @bind:set="sessionViewModel.SetCounter" />
				<InvalidMessage For="() => sessionViewModel.Counter" />
			</div>
			<div class="col-md-4">
				<label for="settings" class="form-label">Settings:</label>
				<textarea id="settings"
						  class="form-control"
						  @bind:get="sessionViewModel.Settings"
						  @bind:set="sessionViewModel.SetSettings" />
				<InvalidMessage For="() => sessionViewModel.Settings" />
			</div>
			<!-- Address Fields -->
			<div class="col-12">
				<h4 class="mb-3">Home Address</h4>
			</div>

			<div class="col-12">
				<label for="street" class="form-label">Street:</label>
				<input id="street"
					   class="form-control"
					   @bind:get="sessionViewModel.HomeAddress.Street"
					   @bind:set="sessionViewModel.HomeAddress.SetStreet" />
				<InvalidMessage For="() => sessionViewModel.HomeAddress.Street" />
			</div>

			<div class="col-md-6">
				<label for="city" class="form-label">City:</label>
				<input id="city"
					   class="form-control"
					   @bind:get="sessionViewModel.HomeAddress.City"
					   @bind:set="sessionViewModel.HomeAddress.SetCity" />
				<InvalidMessage For="() => sessionViewModel.HomeAddress.City" />
			</div>

			<div class="col-md-3">
				<label for="state" class="form-label">State:</label>
				<input id="state"
					   class="form-control"
					   @bind:get="sessionViewModel.HomeAddress.State"
					   @bind:set="sessionViewModel.HomeAddress.SetState" />
				<InvalidMessage For="() => sessionViewModel.HomeAddress.State" />
			</div>

			<div class="col-md-3">
				<label for="postalCode" class="form-label">Postal Code:</label>
				<input id="postalCode"
					   class="form-control"
					   @bind:get="sessionViewModel.HomeAddress.PostalCode"
					   @bind:set="sessionViewModel.HomeAddress.SetPostalCode" />
				<InvalidMessage For="() => sessionViewModel.HomeAddress.PostalCode" />
			</div>

			<div class="col-md-6">
				<label for="country" class="form-label">Country:</label>
				<input id="country"
					   class="form-control"
					   @bind:get="sessionViewModel.HomeAddress.Country"
					   @bind:set="sessionViewModel.HomeAddress.SetCountry" />
				<InvalidMessage For="() => sessionViewModel.HomeAddress.Country" />
			</div>

			<!-- Location Fields -->
			<div class="col-12">
				<h5 class="mb-2 mt-3">Location Coordinates</h5>
			</div>

			<div class="col-md-6">
				<label for="latitude" class="form-label">Latitude:</label>
				<input id="latitude"
					   class="form-control"
					   type="number"
					   step="0.000001"
					   min="-90"
					   max="90"
					   @bind:get="sessionViewModel.HomeAddress.Location.Latitude"
					   @bind:set="sessionViewModel.HomeAddress.Location.SetLatitude"
					   placeholder="e.g., 40.7128" />
				<InvalidMessage For="() => sessionViewModel.HomeAddress.Location.Latitude" />
				<div class="form-text">Valid range: -90 to 90 degrees</div>
			</div>

			<div class="col-md-6">
				<label for="longitude" class="form-label">Longitude:</label>
				<input id="longitude"
					   class="form-control"
					   type="number"
					   step="0.000001"
					   min="-180"
					   max="180"
					   @bind:get="sessionViewModel.HomeAddress.Location.Longitude"
					   @bind:set="sessionViewModel.HomeAddress.Location.SetLongitude"
					   placeholder="e.g., -74.0060" />
				<InvalidMessage For="() => sessionViewModel.HomeAddress.Location.Longitude" />
				<div class="form-text">Valid range: -180 to 180 degrees</div>
			</div>

			<div class="col-12">
				<div class="hstack gap-2">
					<button type="submit" class="btn btn-primary btn-sm">Submit</button>
					<button type="button" class="btn btn-secondary btn-sm" @onclick="sessionViewModel.Reset">Reset</button>
				</div>
			</div>
		</EditForm>
	</Tab>
</Tabs>

